From fde20b3808529d009608c48a5d947d0193f1d984 Mon Sep 17 00:00:00 2001
From: Noah Huetter <noahhuetter@gmail.com>
Date: Mon, 16 Jan 2023 12:06:30 +0100
Subject: [PATCH 03/16] [snRuntime] Keep stack aligned when pushing bootrom
 return address

---
 sw/snRuntime/src/start.S | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/sw/snRuntime/src/start.S b/sw/snRuntime/src/start.S
index 7437a15..7a2b13e 100644
--- a/sw/snRuntime/src/start.S
+++ b/sw/snRuntime/src/start.S
@@ -156,7 +156,7 @@ snrt.crt0.init_tls:
 2:
 
     # Store bootloader return address on top of stack
-    addi      sp, sp, -4
+    addi      sp, sp, -8
     sw        s1, 0(sp)
 
     # Initialize the root team.
@@ -210,7 +210,7 @@ snrt.crt0.end:
 snrt.crt0.exit:
     # load bootloader return address from stack and jump out of snRuntime
     lw        ra, 0(sp)
-    addi      sp, sp, 4
+    addi      sp, sp, 8
     jr        ra
 
 __snrt_crt0_interrupt_handler:
-- 
2.16.5

